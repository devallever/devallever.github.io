<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>Android 根据一系列坐标点绘制贝塞尔曲线 | Allever Blog | Android Developer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Android,自定义View">
    <meta name="description" content="功能概述：给定一系列坐标，绘制它的贝塞尔曲线，并有渐变效果，如图: 第一版：                                                                                                           第二版：">
<meta name="keywords" content="Android,自定义View">
<meta property="og:type" content="article">
<meta property="og:title" content="Android 根据一系列坐标点绘制贝塞尔曲线">
<meta property="og:url" content="https://devallever.github.io/2017/07/30/custom-bezier-line/index.html">
<meta property="og:site_name" content="Allever Blog">
<meta property="og:description" content="功能概述：给定一系列坐标，绘制它的贝塞尔曲线，并有渐变效果，如图: 第一版：                                                                                                           第二版：">
<meta property="og:image" content="https://github.com/devallever/DataProject/blob/master/data/bicycle/line-01.png?raw=true">
<meta property="og:image" content="https://github.com/devallever/DataProject/blob/master/data/bicycle/Screenshot_20170810-205520.png?raw=true">
<meta property="og:image" content="https://github.com/devallever/DataProject/blob/master/data/bicycle/line-03.png?raw=true">
<meta property="og:image" content="https://github.com/devallever/DataProject/blob/master/data/bicycle/Screenshot_20170810-205520.png?raw=true">
<meta property="og:image" content="https://github.com/devallever/DataProject/blob/master/data/bicycle/line-03.png?raw=true">
<meta property="og:updated_time" content="2017-08-15T13:24:15.058Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android 根据一系列坐标点绘制贝塞尔曲线">
<meta name="twitter:description" content="功能概述：给定一系列坐标，绘制它的贝塞尔曲线，并有渐变效果，如图: 第一版：                                                                                                           第二版：">
<meta name="twitter:image" content="https://github.com/devallever/DataProject/blob/master/data/bicycle/line-01.png?raw=true">
    
        <link rel="alternate" type="application/atom+xml" title="Allever Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@1.6.1/css/style.css">
    <script>window.lazyScripts=[]</script>
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Allever</h5>
          <a href="mailto:devallever@163.com" title="devallever@163.com" class="mail">devallever@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/devallever" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://blog.csdn.net/devallever"  >
                <i class="icon icon-lg icon-link"></i>
                CSDN
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Android 根据一系列坐标点绘制贝塞尔曲线</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Android 根据一系列坐标点绘制贝塞尔曲线</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-07-30T08:54:18.000Z" itemprop="datePublished" class="page-time">
  2017-07-30
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Android/">Android</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#功能概述："><span class="post-toc-number">1.</span> <span class="post-toc-text">功能概述：</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#详细实现"><span class="post-toc-number">2.</span> <span class="post-toc-text">详细实现</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#把一般坐标转为-Android中的视图坐标"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">把一般坐标转为 Android中的视图坐标</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#计算控制点"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">计算控制点</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#绘制贝塞尔曲线"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">绘制贝塞尔曲线</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#颜色渐变"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">颜色渐变</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#绘制坐标和分割线"><span class="post-toc-number">2.2.3.</span> <span class="post-toc-text">绘制坐标和分割线</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#第二版更新"><span class="post-toc-number">3.</span> <span class="post-toc-text">第二版更新</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#曲线数据封装"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">曲线数据封装</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#定义公开方法"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">定义公开方法</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#循环绘制曲线"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">循环绘制曲线</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#使用"><span class="post-toc-number">4.</span> <span class="post-toc-text">使用</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#第三版更新"><span class="post-toc-number">5.</span> <span class="post-toc-text">第三版更新</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#绘制不同坐标轴的曲线"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">绘制不同坐标轴的曲线</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#绘制触控标线"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">绘制触控标线</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#绘制标线底下的三角形"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">绘制标线底下的三角形</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#绘制标值"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">绘制标值</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#第四版更新"><span class="post-toc-number">6.</span> <span class="post-toc-text">第四版更新</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-custom-bezier-line"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Android 根据一系列坐标点绘制贝塞尔曲线</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-07-30 16:54:18" datetime="2017-07-30T08:54:18.000Z"  itemprop="datePublished">2017-07-30</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Android/">Android</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="功能概述："><a href="#功能概述：" class="headerlink" title="功能概述："></a>功能概述：</h1><p>给定一系列坐标，绘制它的贝塞尔曲线，并有渐变效果，如图:</p>
<p>第一版：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://github.com/devallever/DataProject/blob/master/data/bicycle/line-01.png?raw=true" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<p>第二版：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://github.com/devallever/DataProject/blob/master/data/bicycle/Screenshot_20170810-205520.png?raw=true" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<p>第三版：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://github.com/devallever/DataProject/blob/master/data/bicycle/line-03.png?raw=true" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<h1 id="详细实现"><a href="#详细实现" class="headerlink" title="详细实现"></a>详细实现</h1><h2 id="把一般坐标转为-Android中的视图坐标"><a href="#把一般坐标转为-Android中的视图坐标" class="headerlink" title="把一般坐标转为 Android中的视图坐标"></a>把一般坐标转为 Android中的视图坐标</h2><p>因为现实中的坐标和Android中的坐标是不同的，Android中向下为Y轴正方向<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">List&lt;PointF&gt; oldPointF1 = new ArrayList&lt;&gt;();</div><div class="line">oldPointF1.add(new PointF(1, 100));</div><div class="line">oldPointF1.add(new PointF(2, 200));</div><div class="line">oldPointF1.add(new PointF(3, 150));</div><div class="line">oldPointF1.add(new PointF(4, 200));</div><div class="line">oldPointF1.add(new PointF(5, 50));</div><div class="line">oldPointF1.add(new PointF(6, 150));</div><div class="line">oldPointF1.add(new PointF(7, 100));</div><div class="line">oldPointF1.add(new PointF(8, 200));</div><div class="line">oldPointF1.add(new PointF(9, 100));</div><div class="line">oldPointF1.add(new PointF(10, 150));</div><div class="line">oldPointF1.add(new PointF(11, 50));</div><div class="line">oldPointF1.add(new PointF(12, 100));</div><div class="line">List&lt;PointF&gt; pointFs1 = changePoint(oldPointF1);</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * 把一般坐标转为 Android中的视图坐标**/</div><div class="line">private List&lt;PointF&gt; changePoint(List&lt;PointF&gt; oldPointFs)&#123;</div><div class="line">    List&lt;PointF&gt; pointFs = new ArrayList&lt;&gt;();</div><div class="line">    //间隔，减去某个值是为了空出多余空间，为了画线以外，还要写坐标轴的值，除以坐标轴最大值(这里设为定值)</div><div class="line">    //相当于缩小图像</div><div class="line">    int intervalX = (getMeasuredWidth()-20)/12;</div><div class="line">    int intervalY = (getMeasuredHeight()-20)/250;</div><div class="line">    int height = getMeasuredHeight();</div><div class="line">    PointF p;</div><div class="line">    float x;</div><div class="line">    float y;</div><div class="line">    for (PointF pointF: oldPointFs)&#123;</div><div class="line">        //最后的正负值是左移右移</div><div class="line">        x = pointF.x * intervalX + 0;</div><div class="line">        y = height - pointF.y * intervalY - 100;</div><div class="line">        p = new PointF(x, y);</div><div class="line">        pointFs.add(p);</div><div class="line">    &#125;</div><div class="line">    return pointFs;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="计算控制点"><a href="#计算控制点" class="headerlink" title="计算控制点"></a>计算控制点</h2><p>参考文章：<a href="http://www.zheng-hang.com/?id=43" target="_blank" rel="external">根据多个点使用canvas贝赛尔曲线画一条平滑的曲线</a></p>
<p>在这里仅把求控制点公式转换成java代码<br>首先封装控制点类：ControlPoint.java<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line">package com.allever.bicycle.chartTest;</div><div class="line"></div><div class="line">import android.graphics.PointF;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by allever on 17-7-27.</div><div class="line"> */</div><div class="line"></div><div class="line">public class ControlPoint &#123;</div><div class="line">    private PointF conPoint1;</div><div class="line">    private PointF conPoint2;</div><div class="line"></div><div class="line">    public ControlPoint(PointF p1, PointF p2)&#123;</div><div class="line">        this.conPoint1 = p1;</div><div class="line">        this.conPoint2 = p2;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public PointF getConPoint1() &#123;</div><div class="line">        return conPoint1;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setConPoint1(PointF conPoint1) &#123;</div><div class="line">        this.conPoint1 = conPoint1;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public PointF getConPoint2() &#123;</div><div class="line">        return conPoint2;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setConPoint2(PointF conPoint2) &#123;</div><div class="line">        this.conPoint2 = conPoint2;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static List&lt;ControlPoint&gt; getControlPointList(List&lt;PointF&gt; pointFs)&#123;</div><div class="line">        List&lt;ControlPoint&gt; controlPoints = new ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">        PointF p1;</div><div class="line">        PointF p2;</div><div class="line">        float conP1x;</div><div class="line">        float conP1y;</div><div class="line">        float conP2x;</div><div class="line">        float conP2y;</div><div class="line">        for (int i=0; i&lt;pointFs.size()-1;i++)&#123;</div><div class="line"></div><div class="line">            if (i == 0)&#123;</div><div class="line">                //第一断1曲线 控制点</div><div class="line">                conP1x = pointFs.get(i).x + (pointFs.get(i + 1).x-pointFs.get(i).x)/4;</div><div class="line">                conP1y = pointFs.get(i).y + (pointFs.get(i + 1).y-pointFs.get(i).y)/4;</div><div class="line"></div><div class="line">                conP2x = pointFs.get(i+1).x - (pointFs.get(i + 2).x - pointFs.get(i).x)/4;</div><div class="line">                conP2y = pointFs.get(i+1).y - (pointFs.get(i + 2).y - pointFs.get(i).y)/4;</div><div class="line"></div><div class="line">            &#125;else if (i == pointFs.size() - 2)&#123;</div><div class="line">                //最后一段曲线 控制点</div><div class="line">                conP1x = pointFs.get(i).x + (pointFs.get(i + 1).x-pointFs.get(i - 1).x)/4;</div><div class="line">                conP1y = pointFs.get(i).y + (pointFs.get(i + 1).y-pointFs.get(i - 1).y)/4;</div><div class="line"></div><div class="line">                conP2x = pointFs.get(i+1).x - (pointFs.get(i + 1).x - pointFs.get(i).x)/4;</div><div class="line">                conP2y = pointFs.get(i+1).y - (pointFs.get(i + 1).y - pointFs.get(i).y)/4;</div><div class="line">            &#125;else &#123;</div><div class="line">                conP1x = pointFs.get(i).x + (pointFs.get(i + 1).x-pointFs.get(i - 1).x)/4;</div><div class="line">                conP1y = pointFs.get(i).y + (pointFs.get(i + 1).y-pointFs.get(i - 1).y)/4;</div><div class="line"></div><div class="line">                conP2x = pointFs.get(i+1).x - (pointFs.get(i + 2).x - pointFs.get(i).x)/4;</div><div class="line">                conP2y = pointFs.get(i+1).y - (pointFs.get(i + 2).y - pointFs.get(i).y)/4;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            p1 = new PointF(conP1x,conP1y);</div><div class="line">            p2 = new PointF(conP2x,conP2y);</div><div class="line"></div><div class="line">            ControlPoint controlPoint = new ControlPoint(p1, p2);</div><div class="line">            controlPoints.add(controlPoint);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return controlPoints;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>其中getControlPointList()方法用来求每一断贝塞尔曲线的控制点，需要传入点坐标的List。一段曲线有两个控制点，因为使用三阶贝塞尔曲线，把每一段的控制点(两个)放到List中返回。<br>这里进行了判断，是因为第一段和左后一段求控制点与其他断有区别。可以查看上面文章公式。</p>
<h3 id="绘制贝塞尔曲线"><a href="#绘制贝塞尔曲线" class="headerlink" title="绘制贝塞尔曲线"></a>绘制贝塞尔曲线</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">Path mPath1 = new Path();</div><div class="line">//贝塞尔曲线获取控制点</div><div class="line">List&lt;ControlPoint&gt; controlPoints1 = ControlPoint.getControlPointList(pointFs1);</div><div class="line">for (int i=0; i&lt;controlPoints1.size(); i++)&#123;</div><div class="line">    if (i == 0)&#123;</div><div class="line">        mPath1.moveTo(pointFs1.get(i).x,pointFs1.get(i).y);</div><div class="line">    &#125;</div><div class="line">    //画三价贝塞尔曲线</div><div class="line">    mPath1.cubicTo(</div><div class="line">            controlPoints1.get(i).getConPoint1().x,controlPoints1.get(i).getConPoint1().y,</div><div class="line">            controlPoints1.get(i).getConPoint2().x,controlPoints1.get(i).getConPoint2().y,</div><div class="line">            pointFs1.get(i+1).x, pointFs1.get(i+1).y</div><div class="line">    );</div><div class="line">&#125;</div><div class="line">LinearGradient mLinearGradient = new LinearGradient(</div><div class="line">        0,</div><div class="line">        0,</div><div class="line">        0,</div><div class="line">        getMeasuredHeight(),</div><div class="line">        new int[]&#123;</div><div class="line">                0xffffffff,</div><div class="line">                getResources().getColor(R.color.cyan),</div><div class="line">                getResources().getColor(R.color.colorPrimary),</div><div class="line">                getResources().getColor(R.color.colorPrimary),</div><div class="line">                getResources().getColor(R.color.colorPrimary)&#125;,</div><div class="line">        null,</div><div class="line">        Shader.TileMode.CLAMP</div><div class="line">);</div><div class="line">mPaint.setShader(mLinearGradient);</div><div class="line"></div><div class="line">canvas.drawPath(mPath1,mPaint);</div><div class="line">canvas.save();</div></pre></td></tr></table></figure>
<h3 id="颜色渐变"><a href="#颜色渐变" class="headerlink" title="颜色渐变"></a>颜色渐变</h3><p>把画笔paint设置线性渐变LinearGradient，查看该构造方法，可以知道，<br>第一个参数，0，为x中开始渐变<br>第二个参数，0，为y轴开始渐变<br>第三个参数。0，为x轴结束渐变<br>第四个参数，为y轴结束渐变，<br>这里这样设置就是只在y轴上渐变<br>颜色数组：<br>依次是从上到下的渐变颜色<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">LinearGradient mLinearGradient = new LinearGradient(</div><div class="line">        0,</div><div class="line">        0,</div><div class="line">        0,</div><div class="line">        getMeasuredHeight(),</div><div class="line">        new int[]&#123;</div><div class="line">                0xffffffff,</div><div class="line">                getResources().getColor(R.color.cyan),</div><div class="line">                getResources().getColor(R.color.colorPrimary),</div><div class="line">                getResources().getColor(R.color.colorPrimary),</div><div class="line">                getResources().getColor(R.color.colorPrimary)&#125;,</div><div class="line">        null,</div><div class="line">        Shader.TileMode.CLAMP</div><div class="line">);</div><div class="line">mPaint.setShader(mLinearGradient);</div></pre></td></tr></table></figure></p>
<h3 id="绘制坐标和分割线"><a href="#绘制坐标和分割线" class="headerlink" title="绘制坐标和分割线"></a>绘制坐标和分割线</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">//画分割线和纵坐标</div><div class="line">Paint linePaint = new Paint();</div><div class="line">linePaint.setColor(0x66cccccc);</div><div class="line">linePaint.setTextSize(40f);</div><div class="line">//画5条分割线</div><div class="line">for (int i=0; i&lt;5; i++)&#123;</div><div class="line">    canvas.drawLine(90, getMeasuredHeight()-((getMeasuredHeight()/6) * i) - 140, getMeasuredWidth(), getMeasuredHeight()-((getMeasuredHeight()/6) * i) - 140,linePaint);</div><div class="line">    canvas.drawText(45*i+&quot;&quot;,10, getMeasuredHeight()-((getMeasuredHeight()/6) * i) - 130,linePaint);</div><div class="line">    canvas.save();</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">//画横坐标</div><div class="line">linePaint.setTextSize(30f);</div><div class="line">for (int i=0; i&lt;12; i++)&#123;</div><div class="line">    canvas.drawText((i+1)+&quot;:00&quot;, (getMeasuredWidth())/13*i + 100, getMeasuredHeight()-((getMeasuredHeight()/5) * 0) - 60, linePaint);</div><div class="line">    canvas.save();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="第二版更新"><a href="#第二版更新" class="headerlink" title="第二版更新"></a>第二版更新</h1><p>可以设置数据，曲线数量</p>
<h2 id="曲线数据封装"><a href="#曲线数据封装" class="headerlink" title="曲线数据封装"></a>曲线数据封装</h2><p>LineDataSet.java<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">public class LineDataSet &#123;</div><div class="line">    private int color;</div><div class="line">    private int[] gradientColors;</div><div class="line">    private List&lt;PointF&gt; oldPointFsList;</div><div class="line"></div><div class="line">    public int getColor() &#123;</div><div class="line">        return color;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setColor(int color) &#123;</div><div class="line">        this.color = color;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public int[] getGradientColors() &#123;</div><div class="line">        return gradientColors;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setGradientColors(int[] gradientColors) &#123;</div><div class="line">        this.gradientColors = gradientColors;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public List&lt;PointF&gt; getOldPointFsList() &#123;</div><div class="line">        return oldPointFsList;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setOldPointFsList(List&lt;PointF&gt; oldPointFsList) &#123;</div><div class="line">        this.oldPointFsList = oldPointFsList;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>color: 指定曲线颜色<br>grandientColors: 颜色数组,用来设定渐变效果<br>oldPointFsList: 坐标点的集合</p>
</blockquote>
<h2 id="定义公开方法"><a href="#定义公开方法" class="headerlink" title="定义公开方法"></a>定义公开方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * 添加数据</div><div class="line"> * @param lineDataSet 曲线参数集**/</div><div class="line">public void addLineData(LineDataSet lineDataSet)&#123;</div><div class="line">    mLineDataSetList.add(lineDataSet);</div><div class="line">    invalidate();</div><div class="line">&#125;</div><div class="line"></div><div class="line">public void removeLine(LineDataSet lineDataSet)&#123;</div><div class="line">    mLineDataSetList.remove(lineDataSet);</div><div class="line">    invalidate();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>mLineDataSetList: 是曲线参数集合, 用来存储每一条曲线.</p>
</blockquote>
<h2 id="循环绘制曲线"><a href="#循环绘制曲线" class="headerlink" title="循环绘制曲线"></a>循环绘制曲线</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">        //循环绘制曲线------------------------------------------------------------------------</div><div class="line">mBezierPaint.setStyle(Paint.Style.STROKE);</div><div class="line">mBezierPaint.setStrokeWidth(10f);//设置线宽</div><div class="line">mBezierPaint.setAntiAlias(true);//去除锯齿</div><div class="line"></div><div class="line">/**</div><div class="line">* 根据给定参数绘制曲线</div><div class="line">* **/</div><div class="line">for (int position=0; position &lt; mLineDataSetList.size(); position++)&#123;</div><div class="line">	List&lt;PointF&gt; pointFList = changePoint(mLineDataSetList.get(position).getOldPointFsList());</div><div class="line">	List&lt;ControlPoint&gt; controlPoints = ControlPoint.getControlPointList(pointFList);</div><div class="line">	Path linePath = new Path();</div><div class="line">	for (int i =0; i&lt;controlPoints.size(); i++)&#123;</div><div class="line">		if (i == 0)&#123;</div><div class="line">			linePath.moveTo(pointFList.get(i).x,pointFList.get(i).y);</div><div class="line">		&#125;</div><div class="line">		//画三价贝塞尔曲线</div><div class="line">		linePath.cubicTo(</div><div class="line">			controlPoints.get(i).getConPoint1().x,controlPoints.get(i).getConPoint1().y,</div><div class="line">			controlPoints.get(i).getConPoint2().x,controlPoints.get(i).getConPoint2().y,</div><div class="line">			pointFList.get(i+1).x, pointFList.get(i+1).y</div><div class="line">		);</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	//设置颜色和渐变</div><div class="line">	int lineColor = mLineDataSetList.get(position).getColor();</div><div class="line">	mBezierPaint.setColor(lineColor);</div><div class="line">	LinearGradient mLinearGradient = null;</div><div class="line">	if (mLineDataSetList.get(position).getGradientColors() != null)&#123;</div><div class="line">		//设置渐变</div><div class="line">		mLinearGradient = new LinearGradient(</div><div class="line">			0,</div><div class="line">			0,</div><div class="line">			0,</div><div class="line">			getMeasuredHeight(),</div><div class="line">			mLineDataSetList.get(position).getGradientColors(),</div><div class="line">			null,</div><div class="line">			Shader.TileMode.CLAMP</div><div class="line">		);</div><div class="line">	&#125;else &#123;</div><div class="line">		mLinearGradient = new LinearGradient(</div><div class="line">			0,</div><div class="line">			0,</div><div class="line">			0,</div><div class="line">			getMeasuredHeight(),</div><div class="line">			new int[]&#123;lineColor,lineColor,lineColor,lineColor,lineColor&#125;,</div><div class="line">			null,</div><div class="line">			Shader.TileMode.CLAMP);</div><div class="line">	&#125;</div><div class="line">	mBezierPaint.setShader(mLinearGradient);</div><div class="line">	canvas.drawPath(linePath,mBezierPaint);</div><div class="line">	canvas.save();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>首先根据mLineDataSetList.size()数量决定绘制多少条曲线<br>首先, 把原来坐标转换为Android视图坐标<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">List&lt;PointF&gt; pointFList = changePoint(mLineDataSetList.get(position).getOldPointFsList());</div></pre></td></tr></table></figure></p>
<p>更新后的转换方法如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">    /**</div><div class="line">     * 把一般坐标转为 Android中的视图坐标**/</div><div class="line">    private List&lt;PointF&gt; changePoint(List&lt;PointF&gt; oldPointFs)&#123;</div><div class="line">        List&lt;PointF&gt; pointFs = new ArrayList&lt;&gt;();</div><div class="line">        //间隔，减去某个值是为了空出多余空间，为了画线以外，还要写坐标轴的值，除以坐标轴最大值</div><div class="line">        //相当于缩小图像</div><div class="line">        float intervalX = (getMeasuredWidth() - mMarginLeftRight * 2f)/11f;</div><div class="line">        //float intervalY = (getMeasuredHeight() - mMarginTopBottom * 2f)/200f; 原始</div><div class="line">        float intervalY = (getMeasuredHeight() - mMarginTopBottom * 2f)/200f-0.4f;</div><div class="line">        Log.d(TAG, &quot;intervalX = &quot; + intervalX);</div><div class="line">        Log.d(TAG, &quot;intervalY = &quot; + intervalY);</div><div class="line">        int height = getMeasuredHeight();</div><div class="line">        Log.d(TAG, &quot;width = &quot; + getMeasuredWidth());</div><div class="line">        Log.d(TAG, &quot;height = &quot; +getMeasuredHeight());</div><div class="line">        PointF p;</div><div class="line">        float x;</div><div class="line">        float y;</div><div class="line">        for (int i = 0; i&lt; oldPointFs.size(); i++)&#123;</div><div class="line">            PointF pointF = oldPointFs.get(i);</div><div class="line">            //最后的正负值是左移右移</div><div class="line">            x = (pointF.x-1) * intervalX + mMarginLeftRight;</div><div class="line">            //y = height - mMarginTopBottom - intervalY*pointF.y; 原始</div><div class="line">            y = height - mMarginTopBottom - intervalY*pointF.y - 30f;</div><div class="line">            p = new PointF(x, y);</div><div class="line">            pointFs.add(p);</div><div class="line">            Log.d(TAG, &quot;oldX = &quot; + pointF.x + &quot;\toldY = &quot; + pointF.y);</div><div class="line">            Log.d(TAG, &quot;newX = &quot; + x + &quot;\tnewY = &quot; + y);</div><div class="line">        &#125;</div><div class="line">/*        for (PointF pointF: oldPointFs)&#123;</div><div class="line"></div><div class="line">        &#125;*/</div><div class="line">        return pointFs;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>然后根据转换后的坐标算出每一段贝塞尔曲线的控制点,以三阶曲线为例,一段曲线有两个控制点<br>然后绘制贝塞尔曲线路径<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">for (int i =0; i&lt;controlPoints.size(); i++)&#123;</div><div class="line">	if (i == 0)&#123;</div><div class="line">		linePath.moveTo(pointFList.get(i).x,pointFList.get(i).y);</div><div class="line">	&#125;</div><div class="line">	//画三价贝塞尔曲线</div><div class="line">	linePath.cubicTo(</div><div class="line">		controlPoints.get(i).getConPoint1().x,controlPoints.get(i).getConPoint1().y,</div><div class="line">		controlPoints.get(i).getConPoint2().x,controlPoints.get(i).getConPoint2().y,</div><div class="line">		pointFList.get(i+1).x,</div><div class="line">		pointFList.get(i+1).y</div><div class="line">	);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>cubicT()的方法为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * Add a cubic bezier from the last point, approaching control points</div><div class="line"> * (x1,y1) and (x2,y2), and ending at (x3,y3). If no moveTo() call has been</div><div class="line"> * made for this contour, the first point is automatically set to (0,0).</div><div class="line"> *</div><div class="line"> * @param x1 The x-coordinate of the 1st control point on a cubic curve</div><div class="line"> * @param y1 The y-coordinate of the 1st control point on a cubic curve</div><div class="line"> * @param x2 The x-coordinate of the 2nd control point on a cubic curve</div><div class="line"> * @param y2 The y-coordinate of the 2nd control point on a cubic curve</div><div class="line"> * @param x3 The x-coordinate of the end point on a cubic curve</div><div class="line"> * @param y3 The y-coordinate of the end point on a cubic curve</div><div class="line"> */</div><div class="line">public void cubicTo(float x1, float y1, float x2, float y2,</div><div class="line">                    float x3, float y3) &#123;</div><div class="line">    isSimplePath = false;</div><div class="line">    native_cubicTo(mNativePath, x1, y1, x2, y2, x3, y3);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>看参数解析是需要两个控制点,和一个结束点,因为一段曲线有两个点连接.一个起点,一个终点,这里的第三个坐标值就是终点坐标.</p>
<p>接着根据LineDataSet设置曲线的渐变和颜色<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">//设置颜色和渐变</div><div class="line">int lineColor = mLineDataSetList.get(position).getColor();</div><div class="line">mBezierPaint.setColor(lineColor);</div><div class="line">LinearGradient mLinearGradient = null;</div><div class="line">if (mLineDataSetList.get(position).getGradientColors() != null)&#123;</div><div class="line">//设置渐变</div><div class="line">	mLinearGradient = new LinearGradient(</div><div class="line">		0,</div><div class="line">		0,</div><div class="line">		0,</div><div class="line">		getMeasuredHeight(),</div><div class="line">		mLineDataSetList.get(position).getGradientColors(),</div><div class="line">		null,</div><div class="line">		Shader.TileMode.CLAMP</div><div class="line">	);</div><div class="line">&#125;else &#123;</div><div class="line">	mLinearGradient = new LinearGradient(</div><div class="line">		0,</div><div class="line">		0,</div><div class="line">		0,</div><div class="line">		getMeasuredHeight(),</div><div class="line">		new int[]&#123;lineColor,lineColor,lineColor,lineColor,lineColor&#125;,</div><div class="line">		null,</div><div class="line">		Shader.TileMode.CLAMP);</div><div class="line">&#125;</div><div class="line">mBezierPaint.setShader(mLinearGradient);</div></pre></td></tr></table></figure></p>
<p>因为可能不需要设置曲线渐变,所以对数组进行判空处理,有设置渐变的就用设置的,没有设置渐变的就去原来颜色做渐变</p>
<p>最后绘制贝塞尔曲线<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">canvas.drawPath(linePath,mBezierPaint);</div><div class="line">canvas.save();</div></pre></td></tr></table></figure></p>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><p>在布局中引用控件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;com.allever.bicycle.chartTest.LineChartView</div><div class="line">	android:id=&quot;@+id/id_custom_line_chart_view_activity_line_chart_view&quot;</div><div class="line">	android:layout_width=&quot;450dp&quot;</div><div class="line">	android:layout_height=&quot;250dp&quot;</div><div class="line">	android:layout_alignParentBottom=&quot;true&quot;/&gt;</div></pre></td></tr></table></figure></p>
<p>在代码中设置曲线参数:坐标,颜色,渐变色数组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div></pre></td><td class="code"><pre><div class="line">public void initData()&#123;</div><div class="line">    List&lt;PointF&gt; speedPoint = new ArrayList&lt;&gt;();</div><div class="line">    speedPoint.add(new PointF(1, 190));</div><div class="line">    speedPoint.add(new PointF(2, 70));</div><div class="line">    speedPoint.add(new PointF(3, 190));</div><div class="line">    speedPoint.add(new PointF(4, 70));</div><div class="line">    speedPoint.add(new PointF(5, 190));</div><div class="line">    speedPoint.add(new PointF(6, 70));</div><div class="line">    speedPoint.add(new PointF(7, 190));</div><div class="line">    speedPoint.add(new PointF(8, 70));</div><div class="line">    speedPoint.add(new PointF(9, 190));</div><div class="line">    speedPoint.add(new PointF(10, 70));</div><div class="line">    speedPoint.add(new PointF(11, 190));</div><div class="line">    speedPoint.add(new PointF(12, 70));</div><div class="line">    mSpeedLineDataSet = new LineDataSet();</div><div class="line">    mSpeedLineDataSet.setOldPointFsList(speedPoint);</div><div class="line">    mSpeedLineDataSet.setColor(getResources().getColor(R.color.colorPrimary));</div><div class="line">    mSpeedLineDataSet.setGradientColors(new int[]&#123;</div><div class="line">            0xffffffff,</div><div class="line">            getResources().getColor(R.color.cyan),</div><div class="line">            getResources().getColor(R.color.colorPrimary),</div><div class="line">            getResources().getColor(R.color.colorPrimary),</div><div class="line">            getResources().getColor(R.color.colorPrimary)&#125;);</div><div class="line">    mLineChartView.addLineData(mSpeedLineDataSet);</div><div class="line"></div><div class="line"></div><div class="line">    List&lt;PointF&gt; runSpeedPoint = new ArrayList&lt;&gt;();</div><div class="line">    runSpeedPoint.add(new PointF(1, 50));</div><div class="line">    runSpeedPoint.add(new PointF(2, 200));</div><div class="line">    runSpeedPoint.add(new PointF(3, 10));</div><div class="line">    runSpeedPoint.add(new PointF(4, 200));</div><div class="line">    runSpeedPoint.add(new PointF(5, 10));</div><div class="line">    runSpeedPoint.add(new PointF(6, 200));</div><div class="line">    runSpeedPoint.add(new PointF(7, 10));</div><div class="line">    runSpeedPoint.add(new PointF(8, 200));</div><div class="line">    runSpeedPoint.add(new PointF(9, 10));</div><div class="line">    runSpeedPoint.add(new PointF(10, 200));</div><div class="line">    runSpeedPoint.add(new PointF(11, 10));</div><div class="line">    runSpeedPoint.add(new PointF(12, 50));</div><div class="line">    mRunSpeedLineDataSet = new LineDataSet();</div><div class="line">    mRunSpeedLineDataSet.setOldPointFsList(runSpeedPoint);</div><div class="line">    mRunSpeedLineDataSet.setColor(Color.YELLOW);</div><div class="line">    mRunSpeedLineDataSet.setGradientColors(new int[]&#123;</div><div class="line">            0xffffffff,</div><div class="line">            Color.GREEN,</div><div class="line">            Color.YELLOW,</div><div class="line">            Color.YELLOW,</div><div class="line">            Color.YELLOW&#125;);</div><div class="line">    mLineChartView.addLineData(mRunSpeedLineDataSet);</div><div class="line"></div><div class="line"></div><div class="line">    List&lt;PointF&gt; oppositionPoint = new ArrayList&lt;&gt;();</div><div class="line">    oppositionPoint.add(new PointF(1, 100));</div><div class="line">    oppositionPoint.add(new PointF(2, 150));</div><div class="line">    oppositionPoint.add(new PointF(3, 30));</div><div class="line">    oppositionPoint.add(new PointF(4, 60));</div><div class="line">    oppositionPoint.add(new PointF(5, 80));</div><div class="line">    oppositionPoint.add(new PointF(6, 130));</div><div class="line">    oppositionPoint.add(new PointF(7, 200));</div><div class="line">    oppositionPoint.add(new PointF(8, 160));</div><div class="line">    oppositionPoint.add(new PointF(9, 20));</div><div class="line">    oppositionPoint.add(new PointF(10, 85));</div><div class="line">    oppositionPoint.add(new PointF(11, 200));</div><div class="line">    oppositionPoint.add(new PointF(12, 70));</div><div class="line">    mOppositionLineDataSet = new LineDataSet();</div><div class="line">    mOppositionLineDataSet.setOldPointFsList(oppositionPoint);</div><div class="line">    mOppositionLineDataSet.setColor(getResources().getColor(R.color.colorAccent));</div><div class="line">    mLineChartView.addLineData(mOppositionLineDataSet);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    List&lt;PointF&gt; powerPoint = new ArrayList&lt;&gt;();</div><div class="line">    powerPoint.add(new PointF(1, 100));</div><div class="line">    powerPoint.add(new PointF(2, 140));</div><div class="line">    powerPoint.add(new PointF(3, 100));</div><div class="line">    powerPoint.add(new PointF(4, 140));</div><div class="line">    powerPoint.add(new PointF(5, 100));</div><div class="line">    powerPoint.add(new PointF(6, 140));</div><div class="line">    powerPoint.add(new PointF(7, 100));</div><div class="line">    powerPoint.add(new PointF(8, 140));</div><div class="line">    powerPoint.add(new PointF(9, 100));</div><div class="line">    powerPoint.add(new PointF(10, 140));</div><div class="line">    powerPoint.add(new PointF(11, 100));</div><div class="line">    powerPoint.add(new PointF(12, 140));</div><div class="line">    mPowerLineDataSet = new LineDataSet();</div><div class="line">    mPowerLineDataSet.setOldPointFsList(powerPoint);</div><div class="line">    mPowerLineDataSet.setColor(Color.RED);</div><div class="line">    mPowerLineDataSet.setGradientColors(new int[]&#123;</div><div class="line">            0xffffffff,</div><div class="line">            Color.RED,</div><div class="line">            Color.RED,</div><div class="line">            Color.RED,</div><div class="line">            Color.RED&#125;);</div><div class="line">    mLineChartView.addLineData(mPowerLineDataSet);</div><div class="line"></div><div class="line"></div><div class="line">    List&lt;PointF&gt; heartPoint = new ArrayList&lt;&gt;();</div><div class="line">    heartPoint.add(new PointF(1, 30));</div><div class="line">    heartPoint.add(new PointF(2, 170));</div><div class="line">    heartPoint.add(new PointF(3, 30));</div><div class="line">    heartPoint.add(new PointF(4, 170));</div><div class="line">    heartPoint.add(new PointF(5, 30));</div><div class="line">    heartPoint.add(new PointF(6, 170));</div><div class="line">    heartPoint.add(new PointF(7, 30));</div><div class="line">    heartPoint.add(new PointF(8, 170));</div><div class="line">    heartPoint.add(new PointF(9, 30));</div><div class="line">    heartPoint.add(new PointF(10, 170));</div><div class="line">    heartPoint.add(new PointF(11, 30));</div><div class="line">    heartPoint.add(new PointF(12, 170));</div><div class="line">    mHeartLineDataSet = new LineDataSet();</div><div class="line">    mHeartLineDataSet.setOldPointFsList(heartPoint);</div><div class="line">    mHeartLineDataSet.setColor(Color.BLUE);</div><div class="line">    mHeartLineDataSet.setGradientColors(new int[]&#123;</div><div class="line">            0xffffffff,</div><div class="line">            Color.BLUE,</div><div class="line">            Color.BLUE,</div><div class="line">            Color.BLUE,</div><div class="line">            Color.BLUE&#125;);</div><div class="line">    mLineChartView.addLineData(mHeartLineDataSet);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>效果图:<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://github.com/devallever/DataProject/blob/master/data/bicycle/Screenshot_20170810-205520.png?raw=true" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<h1 id="第三版更新"><a href="#第三版更新" class="headerlink" title="第三版更新"></a>第三版更新</h1><p>可以设置坐标, 触控显示竖线和弹出Y值</p>
<h2 id="绘制不同坐标轴的曲线"><a href="#绘制不同坐标轴的曲线" class="headerlink" title="绘制不同坐标轴的曲线"></a>绘制不同坐标轴的曲线</h2><p>我的思路: 首先就是取消纵坐标的显示(横坐标一样的)，因为在一个界面绘制不同坐标系的图形，纵坐标显示是没意义的。<br>首先需要知道这条曲线一系列坐标中，纵坐标的最大值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">for (int i = 0; i &lt; oldPointFs.size(); i++)&#123;</div><div class="line">	yValue = oldPointFs.get(i).y;</div><div class="line">	if (maxValueY &lt; yValue) </div><div class="line">		maxValueY = yValue+ (yValue*0.1f);//最大值调高一点为了让曲线碰不到最高那条线，总保持一定距离</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后根据这个最大值求出间隔<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">float</span> intervalX = (getMeasuredWidth() - mMarginLeftRight * <span class="number">2f</span>)/<span class="number">11f</span>;</div><div class="line"><span class="comment">//float intervalY = (getMeasuredHeight() - mMarginTopBottom * 2f)/200f; 原始</span></div><div class="line"><span class="keyword">float</span> intervalY = (getMeasuredHeight() - mMarginTopBottom * <span class="number">2f</span>)/maxValueY-<span class="number">0f</span>;</div></pre></td></tr></table></figure></p>
<p>这样的曲线不论纵坐标是多少，都不会超出界线了。</p>
<h2 id="绘制触控标线"><a href="#绘制触控标线" class="headerlink" title="绘制触控标线"></a>绘制触控标线</h2><p>实现思路: 重写onTouchEvent方法，获取当手指按下时候事件，记录按下的x坐标值，判断x在哪个区域，然后在相应的区域绘制一条标线。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public boolean onTouchEvent(MotionEvent event) &#123;</div><div class="line">	float downX = event.getX();</div><div class="line">	switch (event.getAction())&#123;</div><div class="line">		case MotionEvent.ACTION_DOWN:</div><div class="line">			mDownX = downX;</div><div class="line">			postInvalidateDelayed(50);</div><div class="line">			//invalidate();</div><div class="line">			break;</div><div class="line">	&#125;</div><div class="line">        return super.onTouchEvent(event);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在onDraw()方法中判断是否有按下的记录，有则绘制标线，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div></pre></td><td class="code"><pre><div class="line">if (mDownX != -1f)&#123;</div><div class="line">    mVerticalPaint.setColor(Color.WHITE);</div><div class="line">    mVerticalPaint.setStrokeWidth(2f);</div><div class="line">    final float intervalX = (mWidth - 2f * mMarginLeftRight) / 11f;//间隔</div><div class="line">    Log.d(TAG, &quot;onDraw: intervalX = &quot; + intervalX);</div><div class="line">    Log.d(TAG, &quot;onDraw: mDownX = &quot; + mDownX);</div><div class="line">    Path trianglePath = new Path();</div><div class="line">    if ((mDownX &gt; (mMarginLeftRight)) &amp;&amp; (mDownX &lt; (mMarginLeftRight + intervalX/2f)))&#123;</div><div class="line">        canvas.drawLine(</div><div class="line">                mMarginLeftRight,</div><div class="line">                mMarginTopBottom,</div><div class="line">                mMarginLeftRight,</div><div class="line">                mHeight - mMarginTopBottom,</div><div class="line">                mVerticalPaint);</div><div class="line">        trianglePath.moveTo(mMarginLeftRight, mHeight - mMarginTopBottom - 20f);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight - 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.close();</div><div class="line">        canvas.drawPath(trianglePath,mVerticalPaint);</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    else if ((mDownX &gt; (mMarginLeftRight + intervalX/2f)) &amp;&amp; (mDownX &lt; ((mMarginLeftRight + intervalX/2f)+intervalX*1)))&#123;</div><div class="line">        canvas.drawLine(</div><div class="line">                mMarginLeftRight + intervalX*1,</div><div class="line">                mMarginTopBottom,</div><div class="line">                mMarginLeftRight + intervalX*1,</div><div class="line">                mHeight - mMarginTopBottom,</div><div class="line">                mVerticalPaint);</div><div class="line">        trianglePath.moveTo(mMarginLeftRight + intervalX*1, mHeight - mMarginTopBottom - 20f);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*1 - 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*1 + 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.close();</div><div class="line">        canvas.drawPath(trianglePath,mVerticalPaint);</div><div class="line">    &#125;</div><div class="line">    else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*1)) &amp;&amp; (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*2)))&#123;</div><div class="line">        canvas.drawLine(</div><div class="line">                mMarginLeftRight + intervalX*2,</div><div class="line">                mMarginTopBottom,</div><div class="line">                mMarginLeftRight + intervalX*2,</div><div class="line">                mHeight - mMarginTopBottom,</div><div class="line">                mVerticalPaint);</div><div class="line">        trianglePath.moveTo(mMarginLeftRight + intervalX*2, mHeight - mMarginTopBottom - 20f);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*2 - 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*2 + 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.close();</div><div class="line">        canvas.drawPath(trianglePath,mVerticalPaint);</div><div class="line">    &#125;</div><div class="line">    else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*2)) &amp;&amp; (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*3)))&#123;</div><div class="line">        canvas.drawLine(</div><div class="line">                mMarginLeftRight + intervalX*3,</div><div class="line">                mMarginTopBottom,</div><div class="line">                mMarginLeftRight + intervalX*3,</div><div class="line">                mHeight - mMarginTopBottom,</div><div class="line">                mVerticalPaint);</div><div class="line">        trianglePath.moveTo(mMarginLeftRight + intervalX*3, mHeight - mMarginTopBottom - 20f);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*3 - 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*3 + 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.close();</div><div class="line">        canvas.drawPath(trianglePath,mVerticalPaint);</div><div class="line">    &#125;</div><div class="line">    else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*3)) &amp;&amp; (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*4)))&#123;</div><div class="line">        canvas.drawLine(</div><div class="line">                mMarginLeftRight + intervalX*4,</div><div class="line">                mMarginTopBottom,</div><div class="line">                mMarginLeftRight + intervalX*4,</div><div class="line">                mHeight - mMarginTopBottom,</div><div class="line">                mVerticalPaint);</div><div class="line">        trianglePath.moveTo(mMarginLeftRight + intervalX*4, mHeight - mMarginTopBottom - 20f);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*4 - 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*4 + 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.close();</div><div class="line">        canvas.drawPath(trianglePath,mVerticalPaint);</div><div class="line">    &#125;</div><div class="line">    else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*4)) &amp;&amp;</div><div class="line">            (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*5)))&#123;</div><div class="line">        canvas.drawLine(</div><div class="line">                mMarginLeftRight + intervalX*5,</div><div class="line">                mMarginTopBottom,</div><div class="line">                mMarginLeftRight + intervalX*5,</div><div class="line">                mHeight - mMarginTopBottom,</div><div class="line">                mVerticalPaint);</div><div class="line">        trianglePath.moveTo(mMarginLeftRight + intervalX*5, mHeight - mMarginTopBottom - 20f);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*5 - 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*5 + 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.close();</div><div class="line">        canvas.drawPath(trianglePath,mVerticalPaint);</div><div class="line">    &#125;</div><div class="line">    else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*5)) &amp;&amp;</div><div class="line">            (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*6)))&#123;</div><div class="line">        canvas.drawLine(</div><div class="line">                mMarginLeftRight + intervalX*6,</div><div class="line">                mMarginTopBottom,</div><div class="line">                mMarginLeftRight + intervalX*6,</div><div class="line">                mHeight - mMarginTopBottom,</div><div class="line">                mVerticalPaint);</div><div class="line">        trianglePath.moveTo(mMarginLeftRight + intervalX*6, mHeight - mMarginTopBottom - 20f);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*6 - 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*6 + 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.close();</div><div class="line">        canvas.drawPath(trianglePath,mVerticalPaint);</div><div class="line">    &#125;</div><div class="line">    else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*6)) &amp;&amp;</div><div class="line">            (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*7)))&#123;</div><div class="line">        canvas.drawLine(</div><div class="line">                mMarginLeftRight + intervalX*7,</div><div class="line">                mMarginTopBottom,</div><div class="line">                mMarginLeftRight + intervalX*7,</div><div class="line">                mHeight - mMarginTopBottom,</div><div class="line">                mVerticalPaint);</div><div class="line">        trianglePath.moveTo(mMarginLeftRight + intervalX*7, mHeight - mMarginTopBottom - 20f);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*7 - 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*7 + 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.close();</div><div class="line">        canvas.drawPath(trianglePath,mVerticalPaint);</div><div class="line">    &#125;</div><div class="line">    else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*7)) &amp;&amp;</div><div class="line">            (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*8)))&#123;</div><div class="line">        canvas.drawLine(</div><div class="line">                mMarginLeftRight + intervalX*8,</div><div class="line">                mMarginTopBottom,</div><div class="line">                mMarginLeftRight + intervalX*8,</div><div class="line">                mHeight - mMarginTopBottom,</div><div class="line">                mVerticalPaint);</div><div class="line">        trianglePath.moveTo(mMarginLeftRight + intervalX*8, mHeight - mMarginTopBottom - 20f);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*8 - 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*8 + 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.close();</div><div class="line">        canvas.drawPath(trianglePath,mVerticalPaint);</div><div class="line">    &#125;</div><div class="line">    else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*8)) &amp;&amp;</div><div class="line">            (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*9)))&#123;</div><div class="line">        canvas.drawLine(</div><div class="line">                mMarginLeftRight + intervalX*9,</div><div class="line">                mMarginTopBottom,</div><div class="line">                mMarginLeftRight + intervalX*9,</div><div class="line">                mHeight - mMarginTopBottom,</div><div class="line">                mVerticalPaint);</div><div class="line">        trianglePath.moveTo(mMarginLeftRight + intervalX*9, mHeight - mMarginTopBottom - 20f);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*9 - 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*9 + 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.close();</div><div class="line">        canvas.drawPath(trianglePath,mVerticalPaint);</div><div class="line">    &#125;</div><div class="line">    else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*9)) &amp;&amp;</div><div class="line">            (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*10)))&#123;</div><div class="line">        canvas.drawLine(</div><div class="line">                mMarginLeftRight + intervalX*10,</div><div class="line">                mMarginTopBottom,</div><div class="line">                mMarginLeftRight + intervalX*10,</div><div class="line">                mHeight - mMarginTopBottom,</div><div class="line">                mVerticalPaint);</div><div class="line">        trianglePath.moveTo(mMarginLeftRight + intervalX*10, mHeight - mMarginTopBottom - 20f);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*10 - 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*10 + 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.close();</div><div class="line">        canvas.drawPath(trianglePath,mVerticalPaint);</div><div class="line">    &#125;</div><div class="line">    else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*10)) &amp;&amp;</div><div class="line">            (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*11)))&#123;</div><div class="line">        canvas.drawLine(</div><div class="line">                mMarginLeftRight + intervalX*11,</div><div class="line">                mMarginTopBottom,</div><div class="line">                mMarginLeftRight + intervalX*11,</div><div class="line">                mHeight - mMarginTopBottom,</div><div class="line">                mVerticalPaint);</div><div class="line">        trianglePath.moveTo(mMarginLeftRight + intervalX*11, mHeight - mMarginTopBottom - 20f);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*11 - 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.lineTo(mMarginLeftRight + intervalX*11 + 20f, mHeight - mMarginTopBottom);</div><div class="line">        trianglePath.close();</div><div class="line">        canvas.drawPath(trianglePath,mVerticalPaint);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    canvas.save();</div><div class="line">    mDownX = -1f;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>关于区域的划分，例如横坐标起点1:00 到 最后终点12:00,可以分为12个区域，其中第一个区域和地十二个区域只是其他区域的一半，因为12个点可以分为11段。那么其他区域就是以坐标点为中心左右扩展半个区域，组成自己的区域，当按下的x坐标落在某个区域，就在相应区域的中心(原始坐标点的x值)，绘制一条竖线。</p>
<h2 id="绘制标线底下的三角形"><a href="#绘制标线底下的三角形" class="headerlink" title="绘制标线底下的三角形"></a>绘制标线底下的三角形</h2><p>在前面绘制标线的基础上，已经知道了有关的坐标，三角形的中点就是x值，高就向上偏移几个像素，左右两点分别在x值基础上，向左向右偏移几个像素，就绘制出三角形了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">//代码同上</div></pre></td></tr></table></figure></p>
<h2 id="绘制标值"><a href="#绘制标值" class="headerlink" title="绘制标值"></a>绘制标值</h2><p>还记得List<linedataset> mLineDataSetList 保存的数据吗？保存了oldPointF原始坐标，可以根据原始坐标转换成坐标轴相应的坐标newPointF<br>oldPointF用来显示值，<br>newPointF用来确定绘制的位置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div></pre></td><td class="code"><pre><div class="line">//绘制标注-----------------------------------------------------------------------------</div><div class="line">for (int position=0; position &lt; mLineDataSetList.size(); position++)&#123;</div><div class="line">    List&lt;PointF&gt; newPointF = changePoint(mLineDataSetList.get(position).getOldPointFsList(),&quot;&quot;);</div><div class="line">    //绘制标注值及</div><div class="line">    List&lt;PointF&gt; oldPointF = mLineDataSetList.get(position).getOldPointFsList();//显示的数值</div><div class="line">    //绘制标注数值及方框</div><div class="line">    if (mDownX != -1f)&#123;</div><div class="line">        final float intervalX = (mWidth - 2f * mMarginLeftRight) / 11f;</div><div class="line">        if ((mDownX &gt; (mMarginLeftRight)) &amp;&amp;</div><div class="line">                (mDownX &lt; (mMarginLeftRight + intervalX/2f)))&#123;</div><div class="line">            mSelectedPositon = 0;</div><div class="line">        &#125;</div><div class="line">        else if ((mDownX &gt; (mMarginLeftRight + intervalX/2f)) &amp;&amp;</div><div class="line">                (mDownX &lt; ((mMarginLeftRight + intervalX/2f)+intervalX*1)))&#123;</div><div class="line">            mSelectedPositon = 1;</div><div class="line">        &#125;</div><div class="line">        else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*1)) &amp;&amp;</div><div class="line">                (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*2)))&#123;</div><div class="line">            mSelectedPositon = 2;</div><div class="line">        &#125;</div><div class="line">        else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*2)) &amp;&amp;</div><div class="line">                (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*3)))&#123;</div><div class="line">            mSelectedPositon = 3;</div><div class="line">        &#125;</div><div class="line">        else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*3)) &amp;&amp;</div><div class="line">                (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*4)))&#123;</div><div class="line">            mSelectedPositon = 4;</div><div class="line">        &#125;</div><div class="line">        else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*4)) &amp;&amp;</div><div class="line">                (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*5)))&#123;</div><div class="line">            mSelectedPositon = 5;</div><div class="line">        &#125;</div><div class="line">        else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*5)) &amp;&amp;</div><div class="line">                (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*6)))&#123;</div><div class="line">            mSelectedPositon = 6;</div><div class="line">        &#125;</div><div class="line">        else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*6)) &amp;&amp;</div><div class="line">                (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*7)))&#123;</div><div class="line">            mSelectedPositon = 7;</div><div class="line">        &#125;</div><div class="line">        else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*7)) &amp;&amp;</div><div class="line">                (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*8)))&#123;</div><div class="line">            mSelectedPositon = 8;</div><div class="line">        &#125;</div><div class="line">        else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*8)) &amp;&amp;</div><div class="line">                (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*9)))&#123;</div><div class="line">            mSelectedPositon = 9;</div><div class="line">        &#125;</div><div class="line">        else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*9)) &amp;&amp;</div><div class="line">                (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*10)))&#123;</div><div class="line">            mSelectedPositon = 10;</div><div class="line">        &#125;</div><div class="line">        else if ((mDownX &gt; ((mMarginLeftRight + intervalX/2f)+intervalX*10)) &amp;&amp;</div><div class="line">                (mDownX &lt;((mMarginLeftRight + intervalX/2f)+intervalX*11)))&#123;</div><div class="line">            mSelectedPositon = 11;</div><div class="line">        &#125;</div><div class="line">        if (mSelectedPositon == -1)&#123;</div><div class="line">            continue;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        //设置颜色和渐变</div><div class="line">        int lineColor = mLineDataSetList.get(position).getColor();</div><div class="line">        LinearGradient mLinearGradient = null;</div><div class="line">        if (mLineDataSetList.get(position).getGradientColors() != null)&#123;</div><div class="line">            //设置渐变</div><div class="line">            mLinearGradient = new LinearGradient(</div><div class="line">                    0,</div><div class="line">                    0,</div><div class="line">                    0,</div><div class="line">                    getMeasuredHeight(),</div><div class="line">                    mLineDataSetList.get(position).getGradientColors(),</div><div class="line">                    null,</div><div class="line">                    Shader.TileMode.CLAMP</div><div class="line">            );</div><div class="line">        &#125;else &#123;</div><div class="line">            mLinearGradient = new LinearGradient(</div><div class="line">                    0,</div><div class="line">                    0,</div><div class="line">                    0,</div><div class="line">                    getMeasuredHeight(),</div><div class="line">                    new int[]&#123;lineColor,lineColor,lineColor,lineColor,lineColor&#125;,</div><div class="line">                    null,</div><div class="line">                    Shader.TileMode.CLAMP);</div><div class="line">        &#125;</div><div class="line">        mRectPaint.setShader(mLinearGradient);</div><div class="line"></div><div class="line">        mRectPaint.setColor(lineColor);</div><div class="line">        mRectPaint.setStyle(Paint.Style.FILL);</div><div class="line">        mTextPaint.setColor(Color.WHITE);</div><div class="line">        mTextPaint.setTextSize(DensityUtil.sp2px(mContext,12f));</div><div class="line">        String drawText = oldPointF.get(mSelectedPositon).y + &quot;&quot;;</div><div class="line">        mTextPaint.setAntiAlias(true);//去除锯齿</div><div class="line">        mRectPaint.setAntiAlias(true);//去除锯齿</div><div class="line">        if (position % 2==0)&#123;</div><div class="line">            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;</div><div class="line">                canvas.drawRoundRect(</div><div class="line">                        newPointF.get(mSelectedPositon).x,</div><div class="line">                        newPointF.get(mSelectedPositon).y,</div><div class="line">                        newPointF.get(mSelectedPositon).x + DensityUtil.dip2px(mContext,50),</div><div class="line">                        newPointF.get(mSelectedPositon).y + DensityUtil.dip2px(mContext,30),</div><div class="line">                        DensityUtil.dip2px(mContext,8f),</div><div class="line">                        DensityUtil.dip2px(mContext,8f),</div><div class="line">                        mRectPaint);</div><div class="line">                canvas.drawText(</div><div class="line">                        drawText,</div><div class="line">                        0,</div><div class="line">                        drawText.length(),</div><div class="line">                        newPointF.get(mSelectedPositon).x+DensityUtil.dip2px(mContext,5f),</div><div class="line">                        newPointF.get(mSelectedPositon).y+DensityUtil.dip2px(mContext,20f),</div><div class="line">                        mTextPaint);</div><div class="line">            &#125;else &#123;</div><div class="line">                canvas.drawRect(</div><div class="line">                        newPointF.get(mSelectedPositon).x,</div><div class="line">                        newPointF.get(mSelectedPositon).y,</div><div class="line">                        newPointF.get(mSelectedPositon).x + DensityUtil.dip2px(mContext,50),</div><div class="line">                        newPointF.get(mSelectedPositon).y + DensityUtil.dip2px(mContext,30),</div><div class="line">                        mRectPaint);</div><div class="line">                canvas.drawText(</div><div class="line">                        drawText,</div><div class="line">                        0,</div><div class="line">                        drawText.length(),</div><div class="line">                        newPointF.get(mSelectedPositon).x+DensityUtil.dip2px(mContext,5f),</div><div class="line">                        newPointF.get(mSelectedPositon).y+DensityUtil.dip2px(mContext,20f),</div><div class="line">                        mTextPaint);</div><div class="line">            &#125;</div><div class="line">        &#125;else&#123;</div><div class="line">            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;</div><div class="line">                canvas.drawRoundRect(</div><div class="line">                        newPointF.get(mSelectedPositon).x - DensityUtil.dip2px(mContext,50),</div><div class="line">                        newPointF.get(mSelectedPositon).y - DensityUtil.dip2px(mContext,30),</div><div class="line">                        newPointF.get(mSelectedPositon).x ,</div><div class="line">                        newPointF.get(mSelectedPositon).y ,</div><div class="line">                        DensityUtil.dip2px(mContext,8f),</div><div class="line">                        DensityUtil.dip2px(mContext,8f),</div><div class="line">                        mRectPaint);</div><div class="line">                canvas.drawText(</div><div class="line">                        drawText,</div><div class="line">                        0,</div><div class="line">                        drawText.length(),</div><div class="line">                        newPointF.get(mSelectedPositon).x - DensityUtil.dip2px(mContext,50) + DensityUtil.dip2px(mContext, 5f),</div><div class="line">                        newPointF.get(mSelectedPositon).y - DensityUtil.dip2px(mContext,30) + DensityUtil.dip2px(mContext, 20f),</div><div class="line">                        mTextPaint);</div><div class="line">            &#125;else &#123;</div><div class="line">                canvas.drawRect(</div><div class="line">                        newPointF.get(mSelectedPositon).x - DensityUtil.dip2px(mContext,50),</div><div class="line">                        newPointF.get(mSelectedPositon).y - DensityUtil.dip2px(mContext,30),</div><div class="line">                        newPointF.get(mSelectedPositon).x ,</div><div class="line">                        newPointF.get(mSelectedPositon).y ,</div><div class="line">                        mRectPaint);</div><div class="line">                canvas.drawText(</div><div class="line">                        drawText,</div><div class="line">                        0,</div><div class="line">                        drawText.length(),</div><div class="line">                        newPointF.get(mSelectedPositon).x - DensityUtil.dip2px(mContext,50) + DensityUtil.dip2px(mContext, 5f),</div><div class="line">                        newPointF.get(mSelectedPositon).y - DensityUtil.dip2px(mContext,30) + DensityUtil.dip2px(mContext, 20f),</div><div class="line">                        mTextPaint);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">        canvas.save();</div><div class="line">        mSelectedPositon = -1;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></linedataset></p>
<p>左右显示方法，根据position处2取余，0的就在标线右边绘制，1就在标线左边绘制<br>绘制圆角矩形是API21中的方法，如果版本低于21的就绘制一般矩形。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">@TargetApi(Build.VERSION_CODES.LOLLIPOP)</div><div class="line">@Override</div><div class="line">protected void onDraw(Canvas canvas) &#123;</div><div class="line">	if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;</div><div class="line">                        canvas.drawRoundRect(</div><div class="line">                                newPointF.get(mSelectedPositon).x,</div><div class="line">                                newPointF.get(mSelectedPositon).y,</div><div class="line">                                newPointF.get(mSelectedPositon).x + DensityUtil.dip2px(mContext,50),</div><div class="line">                                newPointF.get(mSelectedPositon).y + DensityUtil.dip2px(mContext,30),</div><div class="line">                                DensityUtil.dip2px(mContext,8f),</div><div class="line">                                DensityUtil.dip2px(mContext,8f),</div><div class="line">                                mRectPaint);</div><div class="line">                        canvas.drawText(</div><div class="line">                                drawText,</div><div class="line">                                0,</div><div class="line">                                drawText.length(),</div><div class="line">                                newPointF.get(mSelectedPositon).x+DensityUtil.dip2px(mContext,5f),</div><div class="line">                                newPointF.get(mSelectedPositon).y+DensityUtil.dip2px(mContext,20f),</div><div class="line">                                mTextPaint);</div><div class="line">                    &#125;else &#123;</div><div class="line">                        canvas.drawRect(</div><div class="line">                                newPointF.get(mSelectedPositon).x,</div><div class="line">                                newPointF.get(mSelectedPositon).y,</div><div class="line">                                newPointF.get(mSelectedPositon).x + DensityUtil.dip2px(mContext,50),</div><div class="line">                                newPointF.get(mSelectedPositon).y + DensityUtil.dip2px(mContext,30),</div><div class="line">                                mRectPaint);</div><div class="line">                        canvas.drawText(</div><div class="line">                                drawText,</div><div class="line">                                0,</div><div class="line">                                drawText.length(),</div><div class="line">                                newPointF.get(mSelectedPositon).x+DensityUtil.dip2px(mContext,5f),</div><div class="line">                                newPointF.get(mSelectedPositon).y+DensityUtil.dip2px(mContext,20f),</div><div class="line">                                mTextPaint);</div><div class="line">                    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果图<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://github.com/devallever/DataProject/blob/master/data/bicycle/line-03.png?raw=true" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<h1 id="第四版更新"><a href="#第四版更新" class="headerlink" title="第四版更新"></a>第四版更新</h1><p>活动显示具体数值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public boolean onTouchEvent(MotionEvent event) &#123;</div><div class="line">	float downX = event.getX();</div><div class="line">	switch (event.getAction())&#123;</div><div class="line">		case MotionEvent.ACTION_DOWN:</div><div class="line">			mDownX = downX;</div><div class="line">			//postInvalidateDelayed(50);</div><div class="line">			Log.d(TAG, &quot;onTouchEvent: ACTION_DOWN mDownX = &quot; + mDownX);</div><div class="line">			//invalidate();</div><div class="line">			break;</div><div class="line">		case MotionEvent.ACTION_MOVE:</div><div class="line">			Log.d(TAG, &quot;onTouchEvent: ACTION_MOVE mDownX = &quot; + mDownX);</div><div class="line">			mDownX = event.getX();</div><div class="line">			invalidate();</div><div class="line">			//postInvalidateDelayed(50);</div><div class="line">			break;</div><div class="line">		case MotionEvent.ACTION_UP:</div><div class="line">			mDownX = event.getX();</div><div class="line">			invalidate();</div><div class="line">			Log.d(TAG, &quot;onTouchEvent: ACTION_UP mDownX = &quot; + mDownX);</div><div class="line">			//postInvalidateDelayed(50);</div><div class="line">			break;</div><div class="line">	&#125;</div><div class="line">	//postInvalidateDelayed(50);</div><div class="line">	return true;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>是ACTION_MOVE的时候就记录坐标值,然后重绘</p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-08-15T13:24:15.058Z" itemprop="dateUpdated">2017-08-15 21:24:15</time>
</span><br>


        这里写留言或版权声明：<a href="/2017/07/30/custom-bezier-line/" target="_blank" rel="external">https://devallever.github.io/2017/07/30/custom-bezier-line/</a>
    </div>
    <footer>
        <a href="https://devallever.github.io">
            <img src="/img/avatar.jpg" alt="Allever">
            Allever
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/自定义View/">自定义View</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://devallever.github.io/2017/07/30/custom-bezier-line/&title=《Android 根据一系列坐标点绘制贝塞尔曲线》 — Allever Blog&pic=https://devallever.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://devallever.github.io/2017/07/30/custom-bezier-line/&title=《Android 根据一系列坐标点绘制贝塞尔曲线》 — Allever Blog&source=Android Developer" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://devallever.github.io/2017/07/30/custom-bezier-line/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Android 根据一系列坐标点绘制贝塞尔曲线》 — Allever Blog&url=https://devallever.github.io/2017/07/30/custom-bezier-line/&via=https://devallever.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://devallever.github.io/2017/07/30/custom-bezier-line/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2017/07/30/selected-demo/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Android  选择器</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2017/08/06/android-piece-knowledge/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Android 零碎知识点和技巧</h4>
      </a>
    </div>
  
</nav>



    







<section class="comments" id="comments">
    <!-- UY BEGIN -->
    <div id="uyan_frame"></div>
    <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2131486"></script>
    <!-- UY END -->
</section>




</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        Thanks
        <i class="icon icon-quote-right"></i>
    </h3>
    <ul class="reward-items">
        

        
    </ul>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p>
            <span>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></span>
            <span>Allever &copy; 2015 - 2017</span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://devallever.github.io/2017/07/30/custom-bezier-line/&title=《Android 根据一系列坐标点绘制贝塞尔曲线》 — Allever Blog&pic=https://devallever.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://devallever.github.io/2017/07/30/custom-bezier-line/&title=《Android 根据一系列坐标点绘制贝塞尔曲线》 — Allever Blog&source=Android Developer" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://devallever.github.io/2017/07/30/custom-bezier-line/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Android 根据一系列坐标点绘制贝塞尔曲线》 — Allever Blog&url=https://devallever.github.io/2017/07/30/custom-bezier-line/&via=https://devallever.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://devallever.github.io/2017/07/30/custom-bezier-line/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://devallever.github.io/2017/07/30/custom-bezier-line/" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };



</script>

<script src="//unpkg.com/hexo-theme-material-indigo@1.6.1/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@1.6.1/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
